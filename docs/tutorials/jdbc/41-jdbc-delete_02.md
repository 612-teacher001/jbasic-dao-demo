# *T1.13* JDBC接続によるCRUD操作・削除 ～ 商品を削除してみた・共通メソッド化形編

[Javaによるデータベース接続とCRUD操作のチュートリアル](../tutorials.md) > [JDBC接続によるCRUD操作](./10-jdbc.md)

### 今回のチュートリアル対象

- コミット：[f253a84](https://github.com/612-teacher001/jbasic-dao-demo/commit/f253a84)
- クラス：[`jp.example.app.t1.JdbcDelete`](https://github.com/612-teacher001/jbasic-dao-demo/blob/main/src/main/java/jp/example/app/t1/JdbcDelete.java)

👉 チュートリアルの進め方については [チュートリアルガイド](../guidance.md) を参照してください。

## 1. 概要

このチュートリアルで扱うプログラムは、productsテーブルのレコードを削除して、標準出力に全件表示するというものです。

このチュートリアルでは、**指定したIDの商品を削除する方法** について解説します。  
また、このプログラムでは、削除処理を専用のメソッドに切り出すことで、コードの整理方法についても学びます。

## 2. 事前準備

データベースの詳細については、データベース接続情報を含めて [データベース概要](../00-database.md) を参照してください。

## 3. 手順ごとの解説

以下で解説する手順は `jp.example.app.t1.JdbcDelete#main(String[])` メソッドのコードに記述されている「手順-X」と記述されたコメントに対応しています。  

これらはそれぞれデータベースにアクセスする必要があるので、ひとつのデータベース接続オブジェクトを取得してから個々の操作を実行するようにします。

### 手順-1. 全商品を表示する
### 手順-2. 商品削除のメッセージを表示する
### 手順-3. キーボードから削除する商品のIDを取得する
### 手順-4. データベース接続情報を取得する
### 手順-5. データベース接続オブジェクトを取得する
### 手順-6. 削除対象の商品を取得する
### 手順-7. 削除対象商品の存在チェックをする
- ここはこれまでのチュートリアルで扱ったものと同じです。

### 手順-8. 実行するSQLを設定する
### 手順-9. SQL実行オブジェクトを取得する
### 手順-10. SQLのプレースホルダを商品IDで置換する
### 手順-11. SQLを実行する
```java
// 削除を実行
deleteById(conn, targetId);
```
- `deleteById(Connection, int)` メソッドを呼び出しています。
- このメソッド内では `SQLException` をスローしますが、呼び出し元の try-catch で捕捉されるため、`main` メソッド全体で例外処理が一元化されています。
- DELETE処理を専用メソッドにまとめることで、main メソッドの見通しが良くなり、再利用もしやすくなります。

### 手順-12. 商品リストを表示する
- ここはこれまでのチュートリアルで扱ったものと同じです。

## 4. まとめ

ここのコードで学ぶべきポイント：

  - DELETE文の実行には `executeUpdate` メソッドを使用すること
  - DELETE文を実行するときは必ず WHERE 句で削除対象を限定すること
  - 共通処理をメソッドに切り出すことで、コードの見通しが良くなり、保守性や再利用性が高まること

---

[Javaによるデータベース接続とCRUD操作のチュートリアル](../tutorials.md) > [JDBC接続によるCRUD操作](./10-jdbc.md)

