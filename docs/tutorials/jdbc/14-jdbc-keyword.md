# *T1.13* JDBC接続によるCRUD操作・キーワード検索 ～ 商品をキーワード検索してみた編

[Javaによるデータベース接続とCRUD操作のチュートリアル](../tutorials.md) > [JDBC接続によるCRUD操作](./10-jdbc.md)

### 今回のチュートリアル対象

- コミット：[c5a985c](https://github.com/612-teacher001/jbasic-dao-demo/commit/c5a985c)
- クラス：[`jp.example.app.t1.JdbcKeyword`](https://github.com/612-teacher001/jbasic-dao-demo/blob/main/src/main/java/jp/example/app/t1/JdbcKeyword.java)

👉 チュートリアルの進め方については [チュートリアルガイド](../guidance.md) を参照してください。

## 1. 概要

このチュートリアルで扱うプログラムは、productsテーブルからレコードをキーワード検索で取得して、標準出力に表示するというものです。

このチュートリアルでは、**処理をメソッドとして別定義して再利用する方法** について解説します。

これによりコードの重複を避け、mainメソッドを整理して可読性と保守性を高めることができます。

## 2. 事前準備

データベースの詳細については、データベース接続情報を含めて [データベース概要](../00-database.md) を参照してください。

## 3. 手順ごとの解説

以下で解説する手順は `jp.example.app.t1.JdbcKeyword#main(String[])` メソッドのコードに記述されている「手順-X」と記述されたコメントに対応しています。  
手順-9と手順-11での処理をメソッドとして共通化して再利用できるようにしているので、それ以外の手順についての解説は割愛します。

### 手順-9. 結果セットから商品リストに変換する
```java
productList = convertToList(rs);
```
- 結果セットから商品リストに変換する処理はこれまでのチュートリアルでも記述してきましたが、メソッドとして別定義することで、記述するコードの量を抑制することができます。
- 結果セットから商品リストに変換する処理を `convertToList(ResultSet)` メソッドにまとめています。
- このメソッドは結果を再利用できるように、商品リストを戻り値として返すようにしています。  
戻り値があるため、呼び出し側では必ず代入文の右辺で呼び出すようにします。

### 手順-11. 商品リストを表示する
```java
showProductList(productList);
```
- 商品リストの表示も他のチュートリアルでも何度も記述してきましたが、共通メソッドとして別定義することで、たとえば他の検索処理や商品一覧表示処理からでも呼び出して利用することができます。  
そのために、メソッドのアクセス修飾子を `public` にしています（これは `convertToList` メソッドでも同じです）。  
これにより、パッケージを横断して他のクラスからも呼び出せるようになります。

### 補足：アクセス修飾子について
DAOのメソッドは他のクラスから利用されることを前提に作成します。
そのためアクセス修飾子は `public` とします。  
もし `private` にしてしまうと、そのクラス内でしか使えずDAOとしての役割を果たせなくなります。  
一部の開発環境では新規メソッド作成時に private が自動で付く場合がありますが、ここでは利用側から呼び出せるよう public に修正してください。

## 4. まとめ

ここのコードで学ぶべきポイント：

  - メソッドにまとめることで、コードの重複を避け、mainメソッドを整理できる

---

## 実習問題

以下の課題を進めるにあたっては `jp.example.exercise.t1.keyword` パッケージの中にクラスを作成してください。  
なお、クラス名は `Exercise11` のように「Exercise + 課題番号」の形式にして `main` メソッドに処理を記述してください。  
たとえば、課題-11の場合は「`Exercise11`」というクラスを作成します。

**［課題-21］** チュートリアル「データベースに接続してみた編」で扱ったサンプルソースを参考にして、この2つのメソッドを呼び出したソースコードに変更してみましょう。  
**［課題-22］**  [データベース概要](../00-database.md) を参考にして、キーボードから入力されたキーワードでemployeesテーブルの担当者名を部分一致検索した結果を表示するプログラムを作ってください。  
このとき、`convertToList` および `showProductList` メソッドを呼び出してコードを簡略化してください。

---

[Javaによるデータベース接続とCRUD操作のチュートリアル](../tutorials.md) > [JDBC接続によるCRUD操作](./10-jdbc.md)

