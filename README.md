# README

## プロジェクト概要

本プロジェクトはJavaからデータベースにアクセスするしくみをチュートリアル形式で解説するものです。

題材として、顧客側および管理者側の業務処理を行う Java コマンドラインアプリケーション（CUIベース）の開発を扱います。

JDBC によるデータベースへの単純な接続から始まり、最終的には DAO を導入するところまでを、アプリケーションを進化させながら説明していきます。

このチュートリアルはEclipse + GradleによるJavaプロジェクト形式になっています。  
Gitレポジトリとして管理しているため、任意のリリース版をいつでもチェックアウトできます。  
なお、Gradleについては最低限の利用方法を本チュートリアル内で扱うため、事前知識は不要です。

### 前提とする知識

このチュートリアルでは以下の知識を前提とします：

- Javaの入門書を最低1冊は読了していること（変数・配列・メソッドを使ったプログラムを作成できる）  
- オブジェクト指向（カプセル化、継承とインタフェースの違いを説明できるレベル）  
- CRUD操作からSQL文を連想できること  
- Gitの基本操作（`commit` と `push`、`pull`）

また、このチュートリアルではデータベース製品としてPostgreSQLを前提としていますが、DBMSの製品で提供されるコマンドラインクライアントアプリケーションを使ったことがあると、SQL実行後のテーブルの内容をかんたんに確認できます。


## コンテンツ

  1. [Getting Started](./docs/manuals/getting-started.md)
  2. [チュートリアル](./docs/tutorials/tutorials.md)  
	- T1. JDBCによるデータベース接続とCRUD操作の実装（`jp.example.app.t1` パッケージ）  
	- T2. DAOの導入（`jp.example.app.t2` パッケージ）

### チュートリアルの構成

| 項番 | バージョン | マイルストーン | コードネーム | 技術要素 | 操作分類 | 操作内容 | チュートリアル内容 |
|------|-----------|---------------|-------------|---------|---------|---------|-------------------|
|  1 | T0.00 | MLS000 | prepared   | 配布 | 初期化         | 起動確認         | Eclipse Gradle プロジェクト作成とコマンドライン実行確認 |
|  2 | T1.00 | MLS100 | kashgar    | JDBC | 基盤整備       | 環境準備          | JDBC CRUD 学習前提のデータベース準備 |
|  3 | T1.11 | MLS111 | kashgar    | JDBC | 検索          | 全件検索          | DB接続オブジェクトと例外処理の理解 |
|  4 | T1.12 | MLS112 | aksu       | JDBC | 検索          | 主キー検索        | try-with-resources とプレースホルダ付き SQL の理解 |
|  5 | T1.13 | MLS113 | kucha      | JDBC | 検索          | キーワード検索     | 検索モードとワイルドカードの理解 |
|  6 | T1.14 | MLS114 | turpan     | JDBC | ユーティリティ | 共通メソッドの導入 | commonパッケージに全件表示・結果セット変換メソッド作成 |
|  7 | T1.21 | MLS121 | urumqi     | JDBC | 登録          | レコード追加       | SQL 実行後に全件表示で確認、戻り値の意味を解説 |
|  8 | T1.31 | MLS131 | yining     | JDBC | 更新          | レコード更新       | SQL 実行後に全件表示で確認、戻り値の意味を解説 |
|  9 | T1.41 | MLS141 | altay      | JDBC | 削除          | レコード削除       | SQL 実行後に全件表示で確認、戻り値の意味を解説 |
| 10 | T2.00 | MLS200 | hami       | DAO  | 基盤整備       | 環境準備          | DAO の意義理解とクラスひな型作成、接続統合、インスタンス化まで |
| 11 | T2.11 | MLS211 | karashahr  | DAO  | 検索          | 全件検索           | JDBC 版と DAO 版の全件検索呼び出し方法の違いを確認 |
| 12 | T2.12 | MLS212 | bayanbulak | DAO  | 検索          | 主キー検索         | JDBC 版と DAO 版の主キー検索の SQL 組み立てと例外処理の違いを確認 |
| 13 | T2.13 | MLS213 | tashkurgan | DAO  | 検索          | キーワード検索     | JDBC 版と DAO 版の検索モードとワイルドカード処理の違いを確認 |
| 14 | T2.21 | MLS221 | shache     | DAO  | 登録          | レコード追加       | JDBC 版と DAO 版のレコード追加手順の違いを確認 |
| 15 | T2.22 | MLS222 | kumul      | DAO  | 更新          | レコード更新       | JDBC 版と DAO 版のレコード更新手順の違いを確認 |
| 16 | T2.23 | MLS223 | ruoquiang  | DAO  | 削除          | レコード削除       | JDBC 版と DAO 版のレコード削除手順の違いを確認 |
| 17 | T2.24 | MLS224 | cherchen   | DAO  | 特殊処理       | INNER JOINのみ    | DAO は複数テーブル対応可能 |

## チュートリアルの進め方

1. 項番順に学習を進めることを推奨します。
2. 各ステップで実装後に、**コンソールで結果を確認**してください。
3. JDBC と DAO の違いを意識しながら、SQLの実行結果や例外処理の挙動を理解してください。
4. 共通ユーティリティメソッドは、後続ステップで繰り返し使用するため、正しく理解しておきましょう。

## 前提とする開発環境（IDE）

- **推奨IDE:** Eclipse（動作確認済みですが、他のIDEでも利用可能）  
- **Javaバージョン:** Java 21以降（本プロジェクトはJava 21で動作確認済み）  
- **設定ポイント:**
	- JDBCドライバのJARをプロジェクトのビルドパスに追加してください。  
	- 実行構成でクラスパスが正しく設定されていることを確認してください。  

## 環境構築

### 環境のディレクトリ構成<a id="env-directory"></a>

Gitによる管理対象となっているディレクトリについては以下の通り：

```
├─src/
│  ├─main
│  │  ├─java/
│  │  │   └─jp/example/
│  │  │       └─app/
│  │  │           ├─dao/      ← 受講者が実装する層（DAOクラス群）
│  │  │           ├─service/  ← 受講者が実装する層（Serviceクラス群）
│  │  │           ├─common/  ← 共通ユーティリティクラス群
│  │  │           │
│  │  │           ├─provided/ ← 配布済みユーティリティクラス群
│  │  │           │  ├─configure ← 設定ファイル読み込みユーティリティ群
│  │  │           │  |   ├─ PropertyLoader.java ← プロパティファイル読み込みユーティリティクラス
│  │  │           │  |   └─ DbConfig.java       ← データベース接続情報読み込みクラス
│  │  │           |  |
│  │  │           │  ├─io ← 入出力用ユーティリティクラス群
│  │  │           │  |   ├─ Display.java  ← 標準入力に文字列を表示するユーティリティクラス
│  │  │           │  |   └─ Keyboard.java ← キーボードから入力された値を取得するユーティリティクラス
│  │  │           │  |
│  │  │           │  └─util ← 共通ユーティリティクラス群
│  │  │           │      └─ FixedLengthGenerator.java ← 固定長文字列を生成するユーティリティクラス
│  │  │           │
│  │  │           ├─t1/ ← T1.X系列チュートリアル群
│  │  │           │　├─ JdbcAll.java        ← 全商品の検索
│  │  │           │　├─ JdbcPrimaryKey.java ← 主キー検索
│  │  │           │　├─ JdbcKeyword.java    ← キーワード検索
│  │  │           │　├─ JdbcInsert.java     ← 商品の新規追加
│  │  │           │　├─ JdbcUpdate.java     ← 商品の更新
│  │  │           │　└─ JdbcDelete.java     ← 主キーによる商品の削除
│  │  │           │
│  │  │           ├─t2/ ← T2.X系列チュートリアル群
│  │  │           │　├─ DaoAll.java        ← 全商品の検索
│  │  │           │　├─ DaoPrimaryKey.java ← 主キー検索
│  │  │           │　├─ DaoKeyword.java    ← キーワード検索
│  │  │           │　├─ DaoInsert.java     ← 商品の新規追加
│  │  │           │　├─ DaoUpdate.java     ← 商品の更新
│  │  │           │　└─ DaoDelete.java     ← 主キーによる商品の削除
│  │  │           │
│  │  │           └─Main.java ← セットアップ確認用コマンドラインプログラム
│  │  │
│  │  ├─webapp
│  │  │    └─WEB-INF
│  │  │       └─view/ ← 受講者が実装する層（将来の拡張用に配置してるが、JSPを配置する場合には使用して構わない）
│  │  │
│  │  └─resources/   ← 各種設定ファイル群を配置
│  │       └─db.properties ← データベース接続情報設定ファイル
│  │    
│  └─test
│      ├─java/
│      │   └─jp/example/
│      │       └─app/
│      │       　├─ provided/ ← 配布済みユーティリティクラスのテストケース群
│      │       　│   ├─ configure ← 設定ファイル読み込みユーティリティテストケース群
│      │       　│   │    └─ DbConfigureTest.java ← データベース接続情報読み込みクラステストケース
│      │       　│   │
│      │       　│   ├─ io ← 入出力用ユーティリティクラステストケース群
│      │       　│   │    └─ KeyboardTest.java ← ーボードから入力された値を取得するユーティリティクラステストケース
│      │       　│   │
│      │       　│   └─ util ← 共通ユーティリティクラステストケース群
│      │       　│        └─ FixedLengthGeneratorTest.java ← 固定長文字列を生成するユーティリティクラステストケース
│      │       　│
│      │       　├─dao/      ← DAO用テストケース群
│      │       　└─service/  ← Serviceクラステストケース群
│      │
│      └─resources/   ← テスト用各種設定ファイル群を配置
│      
├─sql/ ← DB初期化用スクリプト（研修で手動 or Gradleタスクから実行）
│      
├─docs/
│   ├─manuals/   ← 本チュートリアルで利用するシステムについての各種マニュアル
│   └─tutorials/ ← チュートリアル本体
│      
└─backup/        ← ローカルのバックアップ用（追跡されていないファイル群を配置）
```

### JDK

- OpenJDK 21 または Oracle JDK 21以降を推奨

### JDBCドライバ（PostgreSQLの場合）

- 本プロジェクトで使用するデータベースはPostgreSQLを前提としています。  
- JDBCドライバのダウンロードとビルドパス設定については [JDBCドライバの導入とビルドパス設定手順](./docs/manuals/jdbc-driver-setup.md) を参照してください。

### コーディング規約・命名規約

- 大まかな規約は慣習に準拠しますが、とくにクラスなどでのメソッドコメントなどの記述については、[Javadoc フォーマット案：主文と補足文の句点ルール](./docs/manuals/javadoc-format-and-examples.md) を参照してください。


<!-- 
## 関連ドキュメント
リリースブランチで追加予定
- [変更履歴](./CHANGELOG.md) -->


